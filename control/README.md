# Modelling closed-loop control systems with VHDL

## Sharing data between VHDL and a foreign engine

- TEXT/CSV.
  - Ad-hoc read/write procedures.
  - Might need to convert integer to/from fixed-point.
- BIN.
  - Not portable.
- Waveform.
  - Post-morten (or streaming).
  - Limited type representations.
- JSON-for-VHDL.
- Cosimulation.

## Exercises

1. In subdir `control`, execute `python run.py -v`.
  - `tb_soft_singleproc`
  - `tb_soft_singleproc_bin`
  - `tb_soft_singleproc_binvec` (does not work)
  - `tb_soft_twoproc`
2. In Matlab, go to subdir `control/m`.
  - Execute `plant.m`.
  - Execute `step_p.m`.
    - `fsys_p`: proportional, continuous plant.
    - `fsys_d`: proportional, discrete plant.
    - `man_ss`: hardcoded controller, discrete plant.
    - `man_diffe`: hardcoded controller, hardcoded plant.
    - `hdl`: generated by `tb_soft_singleproc_bin`.
3. In subdir `control`, execute `python3 run.py -v -g lib.tb_soft_twoproc_bin.all`.

---

- AXI-Lite
- Structural
- Fixed-point

## References

- [mathworks.com: HDL Verifier](https://www.mathworks.com/products/hdl-verifier.html)
  - [xilinx.com: Intellectual Property / HDL Verifier](https://www.xilinx.com/products/intellectual-property/1-13n7edl.html)
- [ctms.engin.umich.edu: Control Tutorials for MATLAB and Simulink (CTMS)](http://ctms.engin.umich.edu/CTMS/index.php?aux=Home)
  - [Introduction: State-Space Methods for Controller Design](http://ctms.engin.umich.edu/CTMS/index.php?example=Introduction&section=ControlStateSpace)
  - [Introduction: System Modeling](http://ctms.engin.umich.edu/CTMS/index.php?example=Introduction&section=SystemModeling#16)
  - [DC Motor Position: PID Controller Design](http://ctms.engin.umich.edu/CTMS/index.php?example=MotorPosition&section=ControlPID)
- [wikipedia.org: Rungeâ€“Kutta methods](https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods)
- [stackoverflow.com: Convert first order transfer function to c code](https://stackoverflow.com/questions/15351315/convert-first-order-transfer-function-to-c-code)
- [stackoverflow.com: How do I implement control system block of a transfer function in C++?](https://stackoverflow.com/questions/4542837/how-do-i-implement-control-system-block-of-a-transfer-function-in-c)
- [electronics.stackexchange.com: Implementing a continuous time transfer function in PC code](https://electronics.stackexchange.com/questions/52099/implementing-a-continuous-time-transfer-function-in-pc-code)
- [octave.sourceforge.io/control/function/tf](https://octave.sourceforge.io/control/function/tf.html)

---

- http://ctms.engin.umich.edu/CTMS/index.php?example=MotorSpeed&section=ControlDigital
- https://dsp.stackexchange.com/questions/14965/how-to-implement-a-filter-in-matlab
- http://stackoverflow.com/questions/22236977/latex-math-in-github-wikis

---

- https://vhdlguide.com/2017/08/10/files-theory-examples/
